(function(o){var e={crosshair:{mode:null,color:'rgba(170, 0, 0, 0.80)',lineWidth:1}};function t(o){var e={x:-1,y:-1,locked:!1};o.setCrosshair=function(t){if(!t)e.x=-1;else{var i=o.p2c(t);e.x=Math.max(0,Math.min(i.left,o.width()));e.y=Math.max(0,Math.min(i.top,o.height()))};o.triggerRedrawOverlay()};o.clearCrosshair=o.setCrosshair;o.lockCrosshair=function(t){if(t)o.setCrosshair(t);e.locked=!0};o.unlockCrosshair=function(){e.locked=!1};function t(t){if(e.locked)return;if(e.x!=-1){e.x=-1;o.triggerRedrawOverlay()}};function i(t){if(e.locked)return;if(o.getSelection&&o.getSelection()){e.x=-1;return};var i=o.offset();e.x=Math.max(0,Math.min(t.pageX-i.left,o.width()));e.y=Math.max(0,Math.min(t.pageY-i.top,o.height()));o.triggerRedrawOverlay()};o.hooks.bindEvents.push(function(o,e){if(!o.getOptions().crosshair.mode)return;e.mouseout(t);e.mousemove(i)});o.hooks.drawOverlay.push(function(o,t){var i=o.getOptions().crosshair;if(!i.mode)return;var a=o.getPlotOffset();t.save();t.translate(a.left,a.top);if(e.x!=-1){var s=o.getOptions().crosshair.lineWidth%2?0.5:0;t.strokeStyle=i.color;t.lineWidth=i.lineWidth;t.lineJoin='round';t.beginPath();if(i.mode.indexOf('x')!=-1){var n=Math.floor(e.x)+s;t.moveTo(n,0);t.lineTo(n,o.height())};if(i.mode.indexOf('y')!=-1){var r=Math.floor(e.y)+s;t.moveTo(0,r);t.lineTo(o.width(),r)};t.stroke()};t.restore()});o.hooks.shutdown.push(function(o,e){e.unbind('mouseout',t);e.unbind('mousemove',i)})};o.plot.plugins.push({init:t,options:e,name:'crosshair',version:'1.0'})})(jQuery);