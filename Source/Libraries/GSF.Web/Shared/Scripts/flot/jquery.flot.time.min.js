(function(t){var l={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function i(e,t){return t*Math.floor(e/t)};function n(e,i,o,s){if(typeof e.strftime=='function'){return e.strftime(i)};var n=function(e,t){e=''+e;t=''+(t==null?'0':t);return e.length==1?t+e:e},l=[],m=!1,r=e.getHours(),c=r<12;if(o==null){o=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']};if(s==null){s=['Sun','Mon','Tue','Wed','Thu','Fri','Sat']};var a;if(r>12){a=r-12}else if(r==0){a=12}else{a=r};for(var u=0;u<i.length;++u){var t=i.charAt(u);if(m){switch(t){case'a':t=''+s[e.getDay()];break;case'b':t=''+o[e.getMonth()];break;case'd':t=n(e.getDate());break;case'e':t=n(e.getDate(),' ');break;case'h':case'H':t=n(r);break;case'I':t=n(a);break;case'l':t=n(a,' ');break;case'm':t=n(e.getMonth()+1);break;case'M':t=n(e.getMinutes());break;case'q':t=''+(Math.floor(e.getMonth()/3)+1);break;case'S':t=n(e.getSeconds());break;case'y':t=n(e.getFullYear()%100);break;case'Y':t=''+e.getFullYear();break;case'p':t=(c)?('am'):('pm');break;case'P':t=(c)?('AM'):('PM');break;case'w':t=''+e.getDay();break};l.push(t);m=!1}else{if(t=='%'){m=!0}else{l.push(t)}}};return l.join('')};function o(e){function r(e,t,i,n){e[t]=function(){return i[n].apply(i,arguments)}};var i={date:e};if(e.strftime!=undefined){r(i,'strftime',e,'strftime')};r(i,'getTime',e,'getTime');r(i,'setTime',e,'setTime');var n=['Date','Day','FullYear','Hours','Milliseconds','Minutes','Month','Seconds'];for(var t=0;t<n.length;t++){r(i,'get'+n[t],e,'getUTC'+n[t]);r(i,'set'+n[t],e,'setUTC'+n[t])};return i};function r(e,t){if(t.timezone=='browser'){return new Date(e)}else if(!t.timezone||t.timezone=='utc'){return o(new Date(e))}else if(typeof timezoneJS!='undefined'&&typeof timezoneJS.Date!='undefined'){var i=new timezoneJS.Date();i.setTimezone(t.timezone);i.setTime(e);return i}else{return o(new Date(e))}};var e={'second':1000,'minute':60*1000,'hour':60*60*1000,'day':24*60*60*1000,'month':30*24*60*60*1000,'quarter':3*30*24*60*60*1000,'year':365.2425*24*60*60*1000};var a=[[1,'second'],[2,'second'],[5,'second'],[10,'second'],[30,'second'],[1,'minute'],[2,'minute'],[5,'minute'],[10,'minute'],[30,'minute'],[1,'hour'],[2,'hour'],[4,'hour'],[8,'hour'],[12,'hour'],[1,'day'],[2,'day'],[3,'day'],[0.25,'month'],[0.5,'month'],[1,'month'],[2,'month']],s=a.concat([[3,'month'],[6,'month'],[1,'year']]),u=a.concat([[1,'quarter'],[2,'quarter'],[1,'year']]);function m(a){a.hooks.processOptions.push(function(a,o){t.each(a.getAxes(),function(a,o){var t=o.options;if(t.mode=='time'){o.tickGenerator=function(a){var z=[],n=r(a.min,t),M=0,f=(t.tickSize&&t.tickSize[1]==='quarter')||(t.minTickSize&&t.minTickSize[1]==='quarter')?u:s;if(t.minTickSize!=null){if(typeof t.tickSize=='number'){M=t.tickSize}else{M=t.minTickSize[0]*e[t.minTickSize[1]]}};for(var m=0;m<f.length-1;++m){if(a.delta<(f[m][0]*e[f[m][1]]+f[m+1][0]*e[f[m+1][1]])/2&&f[m][0]*e[f[m][1]]>=M){break}};var c=f[m][0],o=f[m][1];if(o=='year'){if(t.minTickSize!=null&&t.minTickSize[1]=='year'){c=Math.floor(t.minTickSize[0])}else{var y=Math.pow(10,Math.floor(Math.log(a.delta/e.year)/Math.LN10)),d=(a.delta/e.year)/y;if(d<1.5){c=1}else if(d<3){c=2}else if(d<7.5){c=5}else{c=10};c*=y};if(c<1){c=1}};a.tickSize=t.tickSize||[c,o];var l=a.tickSize[0];o=a.tickSize[1];var h=l*e[o];if(o=='second'){n.setSeconds(i(n.getSeconds(),l))}else if(o=='minute'){n.setMinutes(i(n.getMinutes(),l))}else if(o=='hour'){n.setHours(i(n.getHours(),l))}else if(o=='month'){n.setMonth(i(n.getMonth(),l))}else if(o=='quarter'){n.setMonth(3*i(n.getMonth()/3,l))}else if(o=='year'){n.setFullYear(i(n.getFullYear(),l))};n.setMilliseconds(0);if(h>=e.minute){n.setSeconds(0)};if(h>=e.hour){n.setMinutes(0)};if(h>=e.day){n.setHours(0)};if(h>=e.day*4){n.setDate(1)};if(h>=e.month*2){n.setMonth(i(n.getMonth(),3))};if(h>=e.quarter*2){n.setMonth(i(n.getMonth(),6))};if(h>=e.year){n.setMonth(0)};var g=0,k=Number.NaN,S;do{S=k;k=n.getTime();z.push(k);if(o=='month'||o=='quarter'){if(l<1){n.setDate(1);var v=n.getTime();n.setMonth(n.getMonth()+(o=='quarter'?3:1));var p=n.getTime();n.setTime(k+g*e.hour+(p-v)*l);g=n.getHours();n.setHours(0)}else{n.setMonth(n.getMonth()+l*(o=='quarter'?3:1))}}else if(o=='year'){n.setFullYear(n.getFullYear()+l)}else{n.setTime(k+h)}}while(k<a.max&&k!=S);return z};o.tickFormatter=function(a,i){var f=r(a,i.options);if(t.timeformat!=null){return n(f,t.timeformat,t.monthNames,t.dayNames)};var u=(i.options.tickSize&&i.options.tickSize[1]=='quarter')||(i.options.minTickSize&&i.options.minTickSize[1]=='quarter'),s=i.tickSize[0]*e[i.tickSize[1]],l=i.max-i.min,m=(t.twelveHourClock)?' %p':'',c=(t.twelveHourClock)?'%I':'%H',o;if(s<e.minute){o=c+':%M:%S'+m}else if(s<e.day){if(l<2*e.day){o=c+':%M'+m}else{o='%b %d '+c+':%M'+m}}else if(s<e.month){o='%b %d'}else if((u&&s<e.quarter)||(!u&&s<e.year)){if(l<e.year){o='%b'}else{o='%b %Y'}}else if(u&&s<e.year){if(l<e.year){o='Q%q'}else{o='Q%q %Y'}}else{o='%Y'};var h=n(f,o,t.monthNames,t.dayNames);return h}}})})};t.plot.plugins.push({init:m,options:l,name:'time',version:'1.0'});t.plot.formatDate=n;t.plot.dateGenerator=r})(jQuery);